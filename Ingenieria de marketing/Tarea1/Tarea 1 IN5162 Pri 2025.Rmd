---
title:  "Tarea 1 - IN5162, Semestre Primavera 2025"
author: Lamich, Muñoz, Venegas.
date:   "`r format(Sys.time(), '%d %B, %Y')`"

output:
  html_document:
    df_print: paged
    theme: simplex
    highlight: tango
    toc: no
encoding: UTF-8
---

<!-- 
Author  	  : Marcel Goic
Description	: Comparación de precios de Abarrotes
						- v.0.0 (14/Abr/2022). First Version
						- v.0.0 (14/Aug/2025). Add basket forecasting
Notes       : 
-->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Preliminares

(0.0 puntos) Escriban acá todos los comandos que necesita ejecutar antes de abordar las preguntas de la tarea (carga de librerías, lectura de datos, limpieza de la data, transformación de variables y todo lo que necesite).

#### Preparación Tarea

```{r P0 Corremos libreria}
#Exploración de datos
library(readxl)
library(ggplot2)
library(dplyr)
library(kableExtra)
library(modelsummary)
library(caret)
library(earth)
library(randomForest)
```

```{r P0 Limpiamos objetos}

rm(list=ls())         # Limpia la lista de objetos 
graphics.off()        # Limpia la lista de gráficos
options(digits = 5)   # Número de dígitos a utilizar

```

```{r P0 Fijamos directorio}
setwd("/Users/leandrovenegas/Documents/GitHub/Uni/Ingenieria de marketing/Tarea1")  # fijando el directorio de trabajo
```

```{r P0 Leemos la base}
#Exploración de datos
# Leemos el archivo CSV.
datos_precios = read_excel("Canasta_de_productos.xlsx")
head(datos_precios)
```


```{r P0 Transformamos la base}

#Cambiamos Sub-categoria por Sub_categoria

# Renombramos únicamente la columna que nos falta
datos_precios <- datos_precios %>%
  rename(Sub_categoria = `Sub-categoria`)


# Creamos una variable que se llame precio final, para explorar si existen cambios en cuanto a las ofertas que ofrecen las cadenas de supermercados

datos_precios <- datos_precios %>%
  mutate(Precio_Final = ifelse(!is.na(Precio_Oferta) & Promocion == 1, Precio_Oferta, Precio_Normal))



str(datos_precios)

summary(datos_precios)

#Numerica para año

datos_precios$Ano <- as.numeric(datos_precios$Ano)

summary(datos_precios$Ano)
summary(datos_precios$Mes)
#Veamos datos

View(datos_precios)




# Ademas no todas las columnas son importantes, no podemos comparar el precio de la sal, azucar y endulzante por ejemplo.




head(datos_precios)

```


## Desarrollo

Documenten acá el desarrollo de su tarea por pregunta.

#### Pregunta 1

(1.0 puntos) Exploren los datos para entender la distribución del precio de los abarrotes y ver qué variables podrían ayudar a explicar posibles diferencias en el nivel de precios entre países.

```{r P1}
#Exploración de datos


```

#### Pregunta 2

Usando los aprendizajes derivados de la exploración de datos, utilicen un enfoque de regresión lineal para examinar cuantitativamente qué factores determinan los distintos niveles de precios que pueden haber. En particular, consideren que nos interesa comparar niveles de precios entre países. 
     
a. (1.0 puntos) Propongan al menos dos especificaciones alternativas para el objetivo propuesto. Justifiquen muy brevemente por qué las variables explicativas que está incluyendo en el modelo tienen sentido desde el punto de vista del problema. Justifiquen además el nivel de agregación escogido y los índices considerados en el modelo.

```{r P2_a}
#lm models

```

b. (1.0 puntos) Sobre los dos modelos planteados en la parte anterior, apliquen algún método de selección automática de variables aprendido en clases y compare con respecto a los resultados anteriores. Deben indicar cuáles variables descartan.

```{r P2_b}
#automatic variable selection
```

#### Pregunta 3

(1.0 puntos) Usen al menos dos de los modelos de aprendizaje de máquinas que vimos en clases (MARS, kNN, regression tree o random forest) para generar un pronóstico de precios para un país, año, mes y produto dado. Comparen la capacidad de estos modelos con respecto a los de regresión lineal utilizando métricas de desempeño (MSE, RMSE o MAE). Discutan brevemente sus resultados y el modelo que recomendaría usar.

```{r P3}
#Machine learning models
```

#### Pregunta 4
En vez de pedir que generen una canasta para cada mes año y pais, sugeriría que eligan 3 canasta con al menos 5 productos de su elección y pronostiquen el precio para todos los paises en una fecha en particular. Asi tenemos más variación en las respuestas y dificultamos la copia.

a. (1.0 puntos) Elaboren tres canastas de abarrotes con al menos cinco productos de sus preferencias para todos los países en alguna fecha cualquiera. Pronostiquen su precio corregido por moneda (USD) incluyendo variables explicativas relevantes. Comparen el precio de Chile con respecto al resto de países. 

```{r P4a}
# pronóstico de canasta de abarrotes corregido por moneda
```

b. (0.5 puntos) Utilicen las mismas canastas de abarrotes y pronostiquen su precio corregido por moneda (USD) y por paridad de poder adquisitivo (ppa) incluyendo variables explicativas relevantes. Comparen el precio de Chile con respecto al resto de países. Expliquen brevemente en qué se diferencia esta métrica en comparación a solo corregir por moneda.

```{r P4b}
# pronóstico de canasta de abarrotes corregido por moneda y por ppa

```

## Resumen

(0.5 puntos) Resuman ejecutivamente sus resultados y provean un resumen conciso de los aprendizajes y sugerencias relevantes.

```{r Resumen}
#Summary
```

## Anexos

Documenta acá cualquier otro adicional que consideres útil tener de referencia. 


## Roles

Todos los participantes del grupo de trabajo declaran que su participación queda bien reflejada en la siguiente tabla.  

```{r, message=FALSE, echo=FALSE, warning=FALSE}
library(dplyr)
library(kableExtra)

roles <- data.frame(
  integrantes = c("Integrante 1", "Integrante 2", "Integrante 3"),
  P1 = c("código", "interpretación", "código e interpretación"),
  P2 = c("interpretación", "-", "código e interpretación"),
  P3 = c("-", "-", "código e interpretación"),
  P4 = c("interpretación", "interpretación", "código"),
  Resumen = c("interpretación", "código", "-")
)

roles %>%
  kbl(caption = "**Tabla N+1:** Roles de los Participantes en el trabajo") %>%
  kable_classic(full_width = FALSE, html_font = "Cambria")
```


Asimismo, los participantes del grupo de trabajo declaran que el uso de herramientas de inteligencia artificial (IA) queda bien reflejada en la siguiente tabla.
```{r, echo=FALSE}
iarole <- data.frame(
  preguntas = c("P1", "P2", "P3", "P4", "Resumen"), 
  uso = c("escribir códigos para formatear los datos", 
          "interpretar los resultados", 
          "-", 
          "-", 
          "Encontrar errores en el código"), 
  herramienta = c("Chat GPT-5", 
                  "Ninguna", 
                  "Chat GPT-5", 
                  "Chat GPT-5", 
                  "Chat GPT-5, DeepSeek")
)

iarole %>%
  kbl(caption = "**Tabla N+2:** Rol de la IA en el trabajo") %>%
  kable_classic(full_width = F, html_font = "Cambria")

```
